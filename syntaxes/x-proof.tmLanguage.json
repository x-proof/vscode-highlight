{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "X-Proof",
	"scopeName": "source.xp",
	"patterns": [
		{ "include": "#comments" },
		{ "include": "#block-keywords" },
		{ "include": "#clauses" },
		{ "include": "#blocks" },
		{ "include": "#rule-call" },
		{ "include": "#keywords" },
		{ "include": "#identifiers" },
		{ "include": "#punctuation" }
	],
	"repository": {
		"comments": {
			"patterns": [
				{
					"name": "comment.line.double-slash.x-proof",
					"begin": "//",
					"beginCaptures": { "0": { "name": "punctuation.definition.comment.x-proof" } },
					"end": "$"
				},
				{
					"name": "comment.block.x-proof",
					"begin": "/\\*",
					"beginCaptures": { "0": { "name": "punctuation.definition.comment.begin.x-proof" } },
					"end": "\\*/",
					"endCaptures": { "0": { "name": "punctuation.definition.comment.end.x-proof" } }
				}
			]
		},
		"block-keywords": {
			"patterns": [
				{ "name": "keyword.control.x-proof", "match": "\\b(?:conform|premise|conclusion|proof)\\b" }
			]
		},
		"keywords": {
			"patterns": [
				{ "name": "keyword.declaration.x-proof", "match": "\\b(?:define|axiom|theorem)\\b" },
				{ "name": "keyword.control.x-proof", "match": "\\b(?:conform|premise|conclusion|proof)\\b" }
			]
		},
		"identifiers": {
			"patterns": [
				{ "name": "variable.other.identifier.x-proof", "match": "(?:[@#$]|[A-Za-z_])[A-Za-z0-9_]*" }
			]
		},
		"rule-call": {
			"begin": "((?:[@#$]|[A-Za-z_])[A-Za-z0-9_]*)\\s*(\\()",
			"beginCaptures": {
				"1": { "name": "entity.name.function.x-proof" },
				"2": { "name": "punctuation.definition.parameters.begin.x-proof" }
			},
			"end": "\\)",
			"endCaptures": { "0": { "name": "punctuation.definition.parameters.end.x-proof" } },
			"patterns": [ { "include": "#parameters" } ]
		},
		"parameters": {
			"patterns": [
				{ "name": "variable.parameter.x-proof", "match": "(?:[@#$]|[A-Za-z_])[A-Za-z0-9_]*" },
				{ "name": "punctuation.separator.parameter.x-proof", "match": "," }
			]
		},
		"blocks": {
			"patterns": [
				{
					"begin": "\\b(conform|premise|conclusion|proof)\\b\\s*(\\{)",
					"beginCaptures": {
						"1": { "name": "keyword.control.x-proof" },
						"2": { "name": "punctuation.section.block.begin.x-proof" }
					},
					"end": "\\}",
					"endCaptures": { "0": { "name": "punctuation.section.block.end.x-proof" } },
					"patterns": [
						{ "include": "#comments" },
						{ "include": "#rule-call" },
						{ "include": "#keywords" },
						{ "include": "#identifiers" },
						{ "include": "#punctuation" }
					]
				}
			]
		},
		"clauses": {
			"patterns": [
				{
					"begin": "\\b(define)\\b",
					"beginCaptures": { "1": { "name": "keyword.declaration.define.x-proof" } },
					"end": ";",
					"endCaptures": { "0": { "name": "punctuation.terminator.statement.x-proof" } },
					"patterns": [
						{ "include": "#comments" },
						{ "include": "#blocks" },
						{ "include": "#block-keywords" },
						{ "include": "#rule-call" },
						{ "include": "#keywords" },
						{ "include": "#identifiers" },
						{ "include": "#punctuation" }
					]
				},
				{
					"begin": "\\b(axiom)\\b",
					"beginCaptures": { "1": { "name": "keyword.declaration.axiom.x-proof" } },
					"end": ";",
					"endCaptures": { "0": { "name": "punctuation.terminator.statement.x-proof" } },
					"patterns": [
						{ "include": "#comments" },
						{ "include": "#blocks" },
						{ "include": "#block-keywords" },
						{ "include": "#rule-call" },
						{ "include": "#keywords" },
						{ "include": "#identifiers" },
						{ "include": "#punctuation" }
					]
				},
				{
					"begin": "\\b(theorem)\\b",
					"beginCaptures": { "1": { "name": "keyword.declaration.theorem.x-proof" } },
					"end": ";",
					"endCaptures": { "0": { "name": "punctuation.terminator.statement.x-proof" } },
					"patterns": [
						{ "include": "#comments" },
						{ "include": "#blocks" },
						{ "include": "#block-keywords" },
						{ "include": "#rule-call" },
						{ "include": "#keywords" },
						{ "include": "#identifiers" },
						{ "include": "#punctuation" }
					]
				}
			]
		},
		"punctuation": {
			"patterns": [
				{ "name": "punctuation.separator.comma.x-proof", "match": "," },
				{ "name": "punctuation.terminator.statement.x-proof", "match": ";" },
				{ "name": "punctuation.section.group.begin.x-proof", "match": "\\(" },
				{ "name": "punctuation.section.group.end.x-proof", "match": "\\)" },
				{ "name": "punctuation.section.block.begin.x-proof", "match": "\\{" },
				{ "name": "punctuation.section.block.end.x-proof", "match": "\\}" }
			]
		}
	}
}